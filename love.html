<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>ğŸ’– A Question For You ğŸ’–</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
/* ğŸŒ¸ Lucy Font */
@font-face {
  font-family: 'LucySaidOk';
  src: url('assets/LucySaidOk.ttf') format('truetype');
}

/* Base */
body{
  margin:0;height:100vh;
  background:linear-gradient(135deg,#ff9a9e,#fad0c4);
  display:flex;justify-content:center;align-items:center;
  font-family:'Comic Sans MS',cursive;
  overflow:hidden;
  transition:transform .1s ease;
}

.box{
  background:#fff;padding:25px;border-radius:20px;
  text-align:center;width:90%;max-width:350px;
  box-shadow:0 10px 25px rgba(0,0,0,.2);
  z-index:2;
}

button{
  padding:10px 20px;margin:10px;border:none;
  border-radius:10px;font-size:16px;
  cursor:pointer;transition:transform .2s ease;
}

#yes{background:#ff4d6d;color:#fff;}
#no{background:#ccc;position:absolute;}

/* ğŸŒ¸ Fade-in animation */
@keyframes fadeUp {
  from { opacity:0; transform:translateY(10px); }
  to   { opacity:1; transform:translateY(0); }
}

/* âœ¨ Glow animation */
@keyframes glow {
  0%   { text-shadow:0 0 5px #ff9eb5; }
  50%  { text-shadow:0 0 15px #ff4d6d; }
  100% { text-shadow:0 0 5px #ff9eb5; }
}

/* ğŸ­ NO MESSAGE */
#noMsg{
  margin-top:10px;
  transition:all .3s ease;
}

/* ğŸ’• Initial Lovely (Lucy + fade) */
.mode-love{
  font-family:'LucySaidOk',cursive;
  color:#ff5c8a;
  font-size:15px;
  animation:fadeUp .8s ease forwards;
}

/* ğŸ˜  Little angry */
.mode-angry{
  font-family:Arial,sans-serif;
  color:#ff9800;
  font-weight:bold;
}

/* ğŸ˜¡ Angry */
.mode-angrier{
  font-family:Arial,sans-serif;
  color:#ff3b3b;
  font-weight:800;
}

/* ğŸ˜ Too angry */
.mode-rage{
  font-family:Arial Black,sans-serif;
  color:#b00020;
  font-style:italic;
  font-size:16px;
}

/* âœ¨ Success text (Lucy + fade + glow) */
#successText{
  font-family:'LucySaidOk',cursive;
  font-size:18px;
  color:#ff4d6d;
  animation:fadeUp 1s ease forwards, glow 2s infinite;
}

/* Fireworks */
.firework{
  position:fixed;width:6px;height:6px;border-radius:50%;
  animation:explode 1s ease-out forwards;
}
@keyframes explode{
  from{transform:scale(1);opacity:1;}
  to{transform:scale(15);opacity:0;}
}
</style>
</head>

<body>

<audio id="bgMusic" loop preload="auto"></audio>
<audio id="noSound" src="assets/no_sound.mp3" preload="auto"></audio>

<div class="box" id="mainBox">
  <h2 id="msg"></h2>

  <!-- ğŸŒ¸ Initial NO message -->
  <p id="noMsg" class="mode-love">
    sonna kelu "NO" thodathe ğŸ˜
  </p>

  <img src="assets/heart.gif" width="120"><br><br>

  <button id="yes">YES ğŸ’–</button>
  <button id="no">NO ğŸ˜œ</button>
</div>

<script>
/* URL PARAMS */
const params=new URLSearchParams(location.search);
const partner=decodeURIComponent(escape(atob(params.get("y")||"")));
const genderCombo=(params.get("g")||"").toLowerCase().trim();

/* ELEMENTS */
const music=document.getElementById("bgMusic");
const yesBtn=document.getElementById("yes");
const noBtn=document.getElementById("no");
const noMsg=document.getElementById("noMsg");
const noSound=document.getElementById("noSound");

/* MUSIC */
music.src = genderCombo==="fm" ? "assets/love_2.mp3" : "assets/love_1.mp3";

/* QUESTION */
document.getElementById("msg").innerHTML =
`Hai ${partner} ğŸ’•<br>Will you be my Valentine?`;

/* NO BUTTON */
let yesScale=1,noCount=0;

function evadeNo(){
  noBtn.style.left=Math.random()*80+"%";
  noBtn.style.top=Math.random()*80+"%";

  yesScale+=.2;
  yesBtn.style.transform=`scale(${yesScale})`;

  if(navigator.vibrate)navigator.vibrate(80);

  document.body.style.transform="translateX(10px)";
  setTimeout(()=>document.body.style.transform="translateX(-10px)",50);
  setTimeout(()=>document.body.style.transform="translateX(0)",100);

  noSound.currentTime=0;
  noSound.play();

  noCount++;

  if(noCount===1){
    noMsg.className="mode-angry";
    noMsg.innerText="sonna kekke matiyaa ğŸ˜ !!!!...";
  }
  else if(noCount===2){
    noMsg.className="mode-angrier";
    noMsg.innerText="last warning no ah thodathe ğŸ˜¡!!!!...";
  }
  else if(noCount===3){
    noMsg.className="mode-rage";
    noMsg.innerText="sonna kekka matta ipo paaru ğŸ˜!!!!...";
    setTimeout(()=>noBtn.style.display="none",2000);
  }
}

noBtn.addEventListener("mouseover",evadeNo);
noBtn.addEventListener("touchstart",evadeNo);

/* YES */
yesBtn.addEventListener("click",()=>{
  if(navigator.vibrate)navigator.vibrate([200,100,200,100,300]);
  music.volume=.35;
  music.play().catch(()=>{});

  document.getElementById("mainBox").innerHTML=`
    <h1>YAY ğŸ˜</h1>
    <p id="successText"></p>
    <img src="assets/love.png" width="200">
  `;

  typeWriter("Best decision ever ğŸ’– I love you endlessly ğŸ˜˜");
  fireworks();
});

/* TYPEWRITER */
function typeWriter(text){
  let i=0;
  const t=document.getElementById("successText");
  (function typing(){
    if(i<text.length){
      t.innerHTML+=text.charAt(i++);
      setTimeout(typing,60);
    }
  })();
}

/* FIREWORKS */
function fireworks(){
  setInterval(()=>{
    const f=document.createElement("div");
    f.className="firework";
    f.style.left=Math.random()*100+"%";
    f.style.top=Math.random()*100+"%";
    f.style.background=`hsl(${Math.random()*360},100%,60%)`;
    document.body.appendChild(f);
    setTimeout(()=>f.remove(),1000);
  },200);
}
</script>

</body>
</html>
