<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>ğŸ’– A Question For You ğŸ’–</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
/* ===============================
   CUSTOM FONTS
================================ */
@font-face {
  font-family: 'LucySaidOk';
  src: url('assets/fonts/LucySaidOk.ttf');
}

@font-face {
  font-family: 'FarmhouseVal';
  src: url('assets/fonts/FarmhouseValentines.ttf');
}

/* ===============================
   BASE STYLES
================================ */
body{
  margin:0;height:100vh;
  background:linear-gradient(135deg,#ff9a9e,#fad0c4);
  display:flex;justify-content:center;align-items:center;
  font-family:'Comic Sans MS',cursive;
  overflow:hidden;
  transition:transform .1s ease;
}

.box{
  background:#fff;padding:25px;border-radius:20px;
  text-align:center;width:90%;max-width:350px;
  box-shadow:0 10px 25px rgba(0,0,0,.2);
  z-index:2;
}

button{
  padding:10px 20px;margin:10px;border:none;
  border-radius:10px;font-size:16px;
  cursor:pointer;transition:transform .2s ease;
}

#yes{background:#ff4d6d;color:#fff;}
#no{background:#ccc;position:absolute;}

/* ===============================
   NO MESSAGE MODES
================================ */
#noMsg{
  margin-top:10px;
  transition:all .3s ease;
}

/* ğŸ’• Lovely (Farmhouse Valentineâ€™s) */
.mode-love{
  font-family:'FarmhouseVal',cursive;
  color:#ff5c8a;
  font-size:16px;
}

/* ğŸ˜  Little angry */
.mode-angry{
  font-family:Arial,sans-serif;
  color:#ff9800;
  font-weight:bold;
}

/* ğŸ˜¡ Angry */
.mode-angrier{
  font-family:Arial,sans-serif;
  color:#ff3b3b;
  font-weight:800;
}

/* ğŸ˜ Too angry */
.mode-rage{
  font-family:'Arial Black',sans-serif;
  color:#b00020;
  font-style:italic;
  font-size:16px;
}

/* ===============================
   SUCCESS MESSAGE EFFECTS
================================ */
#typeText{
  font-family:'LucySaidOk',cursive;
  font-size:20px;
  color:#ff2f92;
  opacity:0;
  animation:fadeIn 1.8s ease forwards, glow 1.5s ease-in-out infinite alternate;
}

@keyframes fadeIn{
  from{opacity:0;transform:translateY(10px);}
  to{opacity:1;transform:translateY(0);}
}

@keyframes glow{
  from{text-shadow:0 0 5px #ff9acb;}
  to{text-shadow:0 0 15px #ff2f92;}
}

/* ===============================
   FIREWORKS
================================ */
.firework{
  position:fixed;width:6px;height:6px;border-radius:50%;
  animation:explode 1s ease-out forwards;
}
@keyframes explode{
  from{transform:scale(1);opacity:1;}
  to{transform:scale(15);opacity:0;}
}
</style>
</head>

<body>

<audio id="bgMusic" loop preload="auto"></audio>
<audio id="noSound" src="assets/no_sound.mp3" preload="auto"></audio>

<div class="box" id="mainBox">
  <h2 id="msg"></h2>

  <!-- ğŸ’• Initial NO message -->
  <p id="noMsg" class="mode-love">
    baby ğŸ˜˜ sonna kelu "NO" thodathe ğŸ˜
  </p>

  <img src="assets/heart.gif" width="120"><br><br>

  <button id="yes">YES ğŸ’–</button>
  <button id="no">NO ğŸ˜œ</button>
</div>

<script>
/* ===============================
   URL PARAMS
================================ */
const params=new URLSearchParams(location.search);
const partner=decodeURIComponent(escape(atob(params.get("y")||"")));
const genderCombo=(params.get("g")||"").toLowerCase().trim();

/* ELEMENTS */
const music=document.getElementById("bgMusic");
const yesBtn=document.getElementById("yes");
const noBtn=document.getElementById("no");
const noMsg=document.getElementById("noMsg");
const noSound=document.getElementById("noSound");

/* MUSIC */
if(genderCombo==="mf")music.src="assets/love_1.mp3";
else if(genderCombo==="fm")music.src="assets/love_2.mp3";
else music.src="assets/love_1.mp3";

/* QUESTION */
document.getElementById("msg").innerHTML=
`Hai ${partner} ğŸ’•<br>Will you be my Valentine?`;

/* NO LOGIC */
let yesScale=1,noCount=0;

function evadeNo(){
  noBtn.style.left=Math.random()*80+"%";
  noBtn.style.top=Math.random()*80+"%";

  yesScale+=.2;
  yesBtn.style.transform=`scale(${yesScale})`;

  if(navigator.vibrate)navigator.vibrate(80);

  document.body.style.transform="translateX(10px)";
  setTimeout(()=>document.body.style.transform="translateX(-10px)",50);
  setTimeout(()=>document.body.style.transform="translateX(0)",100);

  noSound.currentTime=0;
  noSound.play();

  noCount++;

  if(noCount===1){
    noMsg.className="mode-angry";
    noMsg.innerText="sonna kekke matiyaa ğŸ˜ !!!!...";
  }
  else if(noCount===2){
    noMsg.className="mode-angrier";
    noMsg.innerText="last warning no ah thodathe ğŸ˜¡!!!!...";
  }
  else if(noCount===3){
    noMsg.className="mode-rage";
    noMsg.innerText="sonna kekka matta ipo paaru ğŸ˜!!!!...";
    setTimeout(()=>noBtn.style.display="none",2000);
  }
}

/* EVENTS */
noBtn.addEventListener("mouseover",evadeNo);
noBtn.addEventListener("touchstart",evadeNo);

/* YES */
yesBtn.addEventListener("click",()=>{
  if(navigator.vibrate)navigator.vibrate([200,100,200,100,300]);

  music.volume=.75;
  music.play().catch(()=>{});

  document.getElementById("mainBox").innerHTML=`
    <h1>YAY ğŸ˜</h1>
    <p id="typeText">Best decision ever ğŸ’– I love you endlessly ğŸ˜˜</p>
    <img src="assets/love.png" width="200">
  `;

  fireworks();
});

/* FIREWORKS */
function fireworks(){
  setInterval(()=>{
    const f=document.createElement("div");
    f.className="firework";
    f.style.left=Math.random()*100+"%";
    f.style.top=Math.random()*100+"%";
    f.style.background=`hsl(${Math.random()*360},100%,60%)`;
    document.body.appendChild(f);
    setTimeout(()=>f.remove(),1000);
  },200);
}
</script>

</body>
</html>
